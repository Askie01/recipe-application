@startuml
title Delete Recipe - Sequence

autonumber

skinparam backgroundColor #0E1117
skinparam shadowing false
skinparam roundcorner 12
skinparam dpi 160

skinparam sequence {
  MessageAlign center
  ArrowColor #58A6FF
  LifeLineBorderColor #30363D
  LifeLineBackgroundColor #161B22
  ActorBorderColor #58A6FF
  ActorBackgroundColor #0D1117
  BoxBorderColor #30363D
  BoxBackgroundColor #0D1117
}

skinparam TitleFontColor #C9D1D9
skinparam SequenceGroupBorderColor #30363D
skinparam SequenceGroupBackgroundColor #161B22
skinparam NoteBackgroundColor #1C2330
skinparam NoteBorderColor #E7E7E7
skinparam NoteFontColor #F5F5F5
skinparam ActorStyle awesome
skinparam DefaultFontColor #C9D1D9

skinparam BoundaryBorderColor #58A6FF
skinparam BoundaryBackgroundColor #0D1117

skinparam ControlBorderColor #58A6FF
skinparam ControlBackgroundColor #0D1117

skinparam DatabaseBorderColor #58A6FF
skinparam DatabaseBackgroundColor #0D1117

skinparam ParticipantBorderColor #58A6FF
skinparam ParticipantBackgroundColor #0D1117

actor Client
boundary Application
control RecipeRestControllerV1
control RecipeServiceV1
database database
control GlobalExceptionHandler

Client -> Application : DELETE /api/v1/recipes/{id}
Application -> RecipeRestControllerV1 : delegate request
RecipeRestControllerV1 -> RecipeServiceV1 : delegate request
note right of RecipeServiceV1
check id existence
end note

alt id exists
    database -> RecipeServiceV1 : recipe
    RecipeServiceV1 -> database : delete recipe
    RecipeServiceV1 -> RecipeRestControllerV1 : deleted recipe
    RecipeRestControllerV1 -> Application : RecipeDTO
    Application -> Client : OK (200) + RecipeDTO
else id doesn't exist
    RecipeServiceV1 -> GlobalExceptionHandler : exception
    GlobalExceptionHandler -> RecipeRestControllerV1 : ErrorHttpResponse
    RecipeRestControllerV1 -> Application : ErrorHttpResponse
    Application -> Client : Not Found (404) + ErrorHttpResponse
end
@enduml